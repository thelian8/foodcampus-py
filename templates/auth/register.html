{% extends 'base.html' %}
{% load static %}
{% block content %}
<div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; padding: 20px;">

    <div style="background-color: #fff; padding: 40px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); border: 1px solid #e0e0e0; width: 100%; max-width: 500px;">

        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #f28c38; margin-bottom: 10px; font-size: 28px;">Register</h1>
            <p style="color: #666; font-size: 16px;">Create your FoodCampus Pro account</p>
        </div>

        <form method="post" style="width: 100%;">
            {% csrf_token %}

            {# Display non-field errors (e.g., if passwords don't match) #}
            {% if form.non_field_errors %}
                <div style="background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #f5c6cb;">
                    {% for error in form.non_field_errors %}
                        <p style="margin: 0;">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div style="margin-bottom: 20px;">
                <label for="id_username" style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">Username:</label>
                {{ form.username }} {# <-- CHANGED: Django renders the input field #}
                {% for error in form.username.errors %}
                    <p style="color: red; font-size: 0.85em; margin-top: 5px;">{{ error }}</p>
                {% endfor %}
            </div>

            <div style="margin-bottom: 20px;">
                <label for="id_email" style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">Email:</label>
                {{ form.email }} {# <-- CHANGED #}
                {% for error in form.email.errors %}
                    <p style="color: red; font-size: 0.85em; margin-top: 5px;">{{ error }}</p>
                {% endfor %}
            </div>

            <div style="margin-bottom: 20px;">
                <label for="id_phone_number" style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">Phone Number:</label>
                {{ form.phone_number }} {# <-- CHANGED #}
                {% for error in form.phone_number.errors %}
                    <p style="color: red; font-size: 0.85em; margin-top: 5px;">{{ error }}</p>
                {% endfor %}
            </div>

            <div style="margin-bottom: 20px;">
                <label for="id_category" style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">Category:</label>
                {{ form.category }} {# <-- CHANGED #}
                {% for error in form.category.errors %}
                    <p style="color: red; font-size: 0.85em; margin-top: 5px;">{{ error }}</p>
                {% endfor %}
            </div>

            <div style="margin-bottom: 20px;">
                <label for="id_password1" style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">Password:</label>
                {{ form.password1 }} {# <-- CHANGED #}
                {% for error in form.password1.errors %}
                    <p style="color: red; font-size: 0.85em; margin-top: 5px;">{{ error }}</p>
                {% endfor %}

                <div style="margin-top: 10px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; border-left: 4px solid #f28c38;">
                    <p style="margin: 0; color: #666; font-size: 14px; font-weight: bold; margin-bottom: 8px;">Password Requirements:</p>
                    <ul style="margin: 0; padding-left: 20px; color: #666; font-size: 13px;">
                        <li>Your password can't be too similar to your other personal information.</li>
                        <li>Your password must contain at least 8 characters.</li>
                        <li>Your password can't be a commonly used password.</li>
                        <li>Your password can't be entirely numeric.</li>
                    </ul>
                </div>
            </div>

            <div style="margin-bottom: 30px;">
                <label for="id_password2" style="display: block; color: #333; font-weight: bold; margin-bottom: 8px;">Password Confirmation:</label>
                {{ form.password2 }} {# <-- CHANGED #}
                {% for error in form.password2.errors %}
                    <p style="color: red; font-size: 0.85em; margin-top: 5px;">{{ error }}</p>
                {% endfor %}
                <p style="color: #666; font-size: 14px; margin-top: 5px; margin-bottom: 0;">Enter the same password as before, for verification.</p>
            </div>

            <button type="submit"
                    style="width: 100%; background-color: #f28c38; color: white; padding: 15px; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: background-color 0.3s; margin-bottom: 20px;"
                    onmouseover="this.style.backgroundColor='#e07b2a'"
                    onmouseout="this.style.backgroundColor='#f28c38'">
                Register
            </button>

            <div style="text-align: center; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                <p style="color: #666; margin-bottom: 15px;">Already have an account?</p>
                <a href="{% url 'accounts:login' %}" {# <-- THIS IS THE CORRECTED LOGIN URL #}
                   style="background-color: #007bff; color: white; padding: 12px 25px; border-radius: 8px; text-decoration: none; display: inline-block; transition: background-color 0.3s;"
                   onmouseover="this.style.backgroundColor='#0056b3'"
                   onmouseout="this.style.backgroundColor='#007bff'">
                    â†’ Login Here
                </a>
            </div>
        </form>
    </div>
</div>

<style>
/* Focus effects for form inputs */
input:focus, select:focus {
    outline: none !important;
    border-color: #f28c38 !important;
    box-shadow: 0 0 0 3px rgba(242, 140, 56, 0.1) !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .register-container {
        padding: 15px !important;
        margin: 10px !important;
    }
}
</style>
{% endblock %}